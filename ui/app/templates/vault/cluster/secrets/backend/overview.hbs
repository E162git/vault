<SecretListHeader
  @isCertTab={{eq tab "certs"}}
  @model={{model}}
  @baseKey={{baseKey}}
  @backendCrumb={{backendCrumb}}
  @filter={{filter}}
/>
<div class="box is-fullwidth is-shadowless has-tall-padding">
  {{#if showEmptyState}}
    <EmptyState
      @title='Connect a database'
      @message={{emptyStateMessage}}
    >
    {{!-- ARG TODO fix link connection when it's setup --}}
      {{#if (or model.connections.canCreate model.connections.canUpdate)}}
        <SecretLink @mode="create" @secret="" @queryParams={{query-params initialKey=(or filter baseKey.id) itemType=tab}} @class="link">
          Connect a database
        </SecretLink>
      {{/if}}
    </EmptyState>
  {{else}}
    <div class="selectable-card-container {{if (and (eq model.connections 403) (and (eq model.roles 403) (eq model.staticRoles 403))) 'one-card'}}">
      {{#if model.connectionCapabilities.canList}}
        <SelectableCard
          @cardTitle="Connections"
          @total={{model.connections.length}}
          @subText="The total number of connections to external databases that you have access to."
          @actionCard={{true}}
          @actionText="Configure new"
          @actionTo="vault.cluster.secrets.backend.create-root"
          @queryParam={{'connection'}}
        />
      {{/if}}
      {{#if (or model.roleCapabilities.canList model.staticRoleCapabilities.canList) }}
        <SelectableCard
          @cardTitle="Roles"
          @total={{add model.roles.length model.staticRoles.length}}
          @subText="The total number of roles that have been set up, both dynamic and static."
          @actionCard={{true}}
          @actionText="Create new"
          @actionTo="vault.cluster.secrets.backend.create-root"
          @queryParam={{'role'}}
        />
      {{/if}}
      <GetCredentialsCard 
        @title="Get Credentials"
        @searchLabel="Role to use"
        @backend={{model.backend}}
        @models={{array 'database/role' 'database/static-role'}}
      />
    </div>
  {{/if}}
</div>
