{{#linked-block
  "vault.cluster.secrets.backend.show"
  @item.id
  class="list-item-row"
  data-test-secret-link=item.id
  encode=true
}}
  <div class="columns is-mobile">
    <div class="column is-10">
      <LinkTo @route={{concat "vault.cluster.secrets.backend.show" }} @model={{@item.id}} class="has-text-black has-text-weight-semibold">
        <Icon
          @glyph="user-square-outline"
          class="has-text-grey-light is-pulled-left"
        />
        <div class="role-item-details">
          <span class="is-underline">{{if (eq @item.id ' ') '(self)' (or @item.keyWithoutParent @item.id)}}</span>
          <span class="tag has-text-grey-dark">{{this.keyTypeValue}}</span>
        </div>
      </LinkTo>
    </div>
    <div class="column has-text-right">
      <PopupMenu name="secret-menu">
        <nav class="menu">
          <ul class="menu-list">
            {{!-- ARG TODO unsure if this is the correct link --}}
            {{#if @item.canEdit}}
              <li class="action">
                <SecretLink
                  @mode="show"
                  @secret={{@item.id}}
                  @class="has-text-black has-text-weight-semibold">
                  Edit connection
                </SecretLink>
              </li>
            {{/if}}
            {{#if this.permissions.canEditRole}}
              <li class="action">
                <SecretLink
                  @mode="show"
                  @secret={{@item.id}}
                  @class="has-text-black has-text-weight-semibold">
                  Edit Role
                </SecretLink>
              </li>
            {{/if}}
            {{#if @item.canReset}}
            {{!-- ARG TODO this needs to be an action --}}
              <li class="action">
                <LinkTo @route="vault.cluster.secrets.backend.credentials" @model={{@item.id}} @query={{hash roleType=this.keyTypeValue}}>
                  Reset connection
                </LinkTo>
              </li>
            {{/if}}
            {{#if this.permissions.canGenerateCredentials}}
              <li class="action">
                <LinkTo @route="vault.cluster.secrets.backend.credentials" @model={{@item.id}} @query={{hash roleType=this.keyTypeValue}}>
                  Generate credentials
                </LinkTo>
              </li>
            {{/if}}
            {{#if @item.canRotateRoot}}
            {{!-- ARG TODO this needs to be an action --}}
              <li class="action">
                <LinkTo @route="vault.cluster.secrets.backend.credentials" @model={{@item.id}} @query={{hash roleType=this.keyTypeValue}}>
                  Rotate root credentials
                </LinkTo>
              </li>
            {{/if}}
          </ul>
        </nav>
      </PopupMenu>
    </div>
  </div>
{{/linked-block}}
